@inject NavigationManager navigation
@inject IJSRuntime JSRuntime

<div class="position-absolute primary-background w-100" style="height: 50px;">
	<div class="ms-3">
		<!-- <h5 class="mb-0">Geeks-Based</h5> -->
	</div>
</div>
<!-- Navbar -->
<!-- header navbar no search -->
<nav class="navbar blur-background navbar-expand-lg" style="z-index: 100;">
	<div class="container-fluid px-0">
		<a class="navbar-brand" href="/homepage">
			<img style="width: 2.5rem;"
					 src="./assets/images/brand/logo/brandLogo2.svg" alt="Geeks" />
		</a>
		<!-- Mobile view nav wrap -->
		<div class="ms-auto d-flex align-items-center order-lg-3">
			@if(Layout.User == null)
			{
				<div>
					<a href="/">Sign In</a>
				</div>
			} else
			{
				<ul class="navbar-nav navbar-right-wrap me-2 flex-row d-none d-md-block">
					<li class="dropdown d-inline-block stopevent position-static">
						<a class="btn btn-icon indicator indicator-primary" href="#" role="button"
							 id="dropdownNotificationSecond" data-bs-toggle="dropdown" aria-haspopup="true"
							 aria-expanded="false">
							<i class="fe fe-bell"></i>
						</a>
						<div class="dropdown-menu dropdown-menu-end dropdown-menu-lg position-absolute mx-3 my-5"
								 aria-labelledby="dropdownNotificationSecond">
							<div>
								<div class="border-bottom px-3 pb-3 d-flex justify-content-between align-items-center">
									<span class="h5 mb-0">Notifications</span>
									<a href="# ">
										<span class="align-middle"><i class="fe fe-settings me-1"></i></span>
									</a>
								</div>
								<ul class="list-group list-group-flush" style="height: 300px" data-simplebar>
									<li class="list-group-item bg-light">
										<div class="row">
											<div class="col">
												<a class="text-body" href="#">
													<div class="d-flex">
														<img src="./assets/images/avatar/mặt.jpg" alt=""
																 class="avatar-md rounded-circle" />
														<div class="ms-3">
															<h5 class="fw-bold mb-1">TUAN BITC:</h5>
															<p class="mb-3 text-body">
																TUAN BITC like your
																comment on course Javascript Introduction!
															</p>
															<span class="fs-6">
																<span>
																	<span class="fe fe-thumbs-up text-success me-1"></span>
																	2 hours ago,
																</span>
																<span class="ms-1">2:19 PM</span>
															</span>
														</div>
													</div>
												</a>
											</div>
											<div class="col-auto text-center me-2">
												<a href="#" class="badge-dot bg-info" data-bs-toggle="tooltip"
													 data-bs-placement="top" title="Mark as read"></a>
												<div>
													<a href="#" class="bg-transparent" data-bs-toggle="tooltip"
														 data-bs-placement="top" title="Remove">
														<i class="fe fe-x"></i>
													</a>
												</div>
											</div>
										</div>
									</li>
									<li class="list-group-item">
										<div class="row">
											<div class="col">
												<a class="text-body" href="#">
													<div class="d-flex">
														<img src="./assets/images/avatar/Firefly person avatar, realistic female2.jpg" alt=""
																 class="avatar-md rounded-circle" />
														<div class="ms-3">
															<h5 class="fw-bold mb-1">Brooklyn Simmons</h5>
															<p class="mb-3 text-body">
																Just launched a new
																Courses React for Beginner.
															</p>
															<span class="fs-6">
																<span>
																	<span class="fe fe-thumbs-up text-success me-1"></span>
																	Oct 9,
																</span>
																<span class="ms-1">1:20 PM</span>
															</span>
														</div>
													</div>
												</a>
											</div>
											<div class="col-auto text-center me-2">
												<a href="#" class="badge-dot bg-secondary"
													 data-bs-toggle="tooltip" data-bs-placement="top"
													 title="Mark as unread"></a>
											</div>
										</div>
									</li>
									<li class="list-group-item">
										<div class="row">
											<div class="col">
												<a class="text-body" href="#">
													<div class="d-flex">
														<img src="./assets/images/avatar/Firefly person avatar, realistic female2.jpg" alt=""
																 class="avatar-md rounded-circle" />
														<div class="ms-3">
															<h5 class="fw-bold mb-1">Jenny Wilson</h5>
															<p class="mb-3 text-body">
																Krisitn Watsan like your
																comment on course Javascript Introduction!
															</p>
															<span class="fs-6">
																<span>
																	<span class="fe fe-thumbs-up text-info me-1"></span>
																	Oct 9,
																</span>
																<span class="ms-1">1:56 PM</span>
															</span>
														</div>
													</div>
												</a>
											</div>
											<div class="col-auto text-center me-2">
												<a href="#" class="badge-dot bg-secondary"
													 data-bs-toggle="tooltip" data-bs-placement="top"
													 title="Mark as unread"></a>
											</div>
										</div>
									</li>
									<li class="list-group-item">
										<div class="row">
											<div class="col">
												<a class="text-body" >
													<div class="d-flex">
														<img src="./assets/images/avatar/Firefly person avatar, realistic female2.jpg" alt=""
																 class="avatar-md rounded-circle" />
														<div class="ms-3">
															<h5 class="fw-bold mb-1">Sina Ray</h5>
															<p class="mb-3 text-body">
																You earn new certificate
																for complete the Javascript Beginner course.
															</p>
															<span class="fs-6">
																<span>
																	<span class="fe fe-award text-warning me-1"></span>
																	Oct 9,
																</span>
																<span class="ms-1">1:56 PM</span>
															</span>
														</div>
													</div>
												</a>
											</div>
											<div class="col-auto text-center me-2">
												<a href="#" class="badge-dot bg-secondary"
													 data-bs-toggle="tooltip" data-bs-placement="top"
													 title="Mark as unread"></a>
											</div>
										</div>
									</li>
								</ul>
							</div>
						</div>
					</li>
					<li class="dropdown ms-2 d-inline-block position-static">
						<a class="rounded-circle" data-bs-toggle="dropdown" data-bs-display="static"
							 aria-expanded="false">
							<div class="avatar avatar-md avatar-indicators avatar-online">
								<img alt="avatar" src="./assets/images/avatar/gigachad.jpg"
										 class="rounded-circle" />
							</div>
						</a>
						<div class="dropdown-menu dropdown-menu-end position-absolute mx-3 my-5">
							<div class="dropdown-item">
								<div class="d-flex">
									<div class="avatar avatar-md avatar-indicators avatar-online">
										<img alt="avatar" src="./assets/images/avatar/gigachad.jpg"
												 class="rounded-circle" />
									</div>
									<div class="ms-3 lh-1">
										<h5 class="mb-1">@Layout.User.full_name</h5>
										<p class="mb-0">@Layout.User.email</p>
									</div>
								</div>
							</div>
							<div class="dropdown-divider"></div>
							<ul class="list-unstyled">
								<li>
									<a href="/account/@Layout.User.id" class="icon-text px-2 py-1">
										<span class="icon">
											<i class="fas fa-user"></i>
										</span>
										<span>Account</span>
									</a>
								</li>
								@if(Layout.User.role != 0)
								{
									<li>
										<a class="icon-text px-2 py-1" href="/admin-course-overview">
											<span class="icon">
												<i class="fas fa-cogs"></i>
											</span>
											<span>Admin management</span>
										</a>
									</li>
								}
							</ul>
							<div class="dropdown-divider"></div>
							<ul class="list-unstyled">
								<li>
									<a class="icon-text px-2 py-1" @onclick="SignOut">
										<span class="icon">
											<i class="fas fa-power-off"></i>
										</span>
										<span>Sign Out</span>
									</a>
								</li>
							</ul>
						</div>
					</li>
				</ul>
			}			
		</div>
		<div>
			<!-- Button -->
			<button class="navbar-toggler collapsed ms-2" type="button" data-bs-toggle="collapse"
							data-bs-target="#navbar-default" aria-controls="navbar-default" aria-expanded="false"
							aria-label="Toggle navigation">
				<span class="icon-bar top-bar mt-0"></span>
				<span class="icon-bar middle-bar"></span>
				<span class="icon-bar bottom-bar"></span>
			</button>
		</div>
		<!-- Collapse -->
		<div class="collapse navbar-collapse" id="navbar-default">
			<ul class="navbar-nav mt-3 mt-lg-0">
				<li class="nav-item ">
					<a class="nav-link" href="/shope-course">Course</a>
				</li>
				<li class="nav-item">
					<a class="nav-link ">Blogs</a>
				</li>
			</ul>
			<!-- search for  header navbar-->
			
		</div>
	</div>
</nav>
@code {
	[CascadingParameter]
	public MainLayout Layout { get; set; }

	protected override Task OnInitializedAsync()
	{
		return base.OnInitializedAsync();
	}

	protected override void OnParametersSet()
	{
		base.OnParametersSet();
	}

	protected override Task OnAfterRenderAsync(bool firstRender)
	{
		return base.OnAfterRenderAsync(firstRender);
	}

	private async void SignOut()
	{
		Layout.User = null;
		await JSRuntime.InvokeVoidAsync("deleteCookie", "_user");
		navigation.NavigateTo("/");
	}
}
